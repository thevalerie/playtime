{% extends 'base.html' %}

{% block content %}
    <h1>Recommendations based on {{ category.cat_name }}</h1>
    <div class="container-fluid">
        {% if recommended_tracks %}
    <div class='container-fluid'>
        <div class="dropdown">
          <button class="btn btn-default pull-right dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
            Dropdown
            <span class="caret"></span>
          </button>
          <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="dLabel">
            <li><a href="#" id='showHideColumnsBtn' data-toggle='modal' data-target='#showHideColumnsModal'>Customize View</a></li>
          </ul>
        </div>
    </div>
        <div class="container-fluid">
            <table id='playlistTable'>
                <thead>
                <tr>
                    <th class='track-title default-show'>TITLE</th>
                    <th class='track-artist default-show'>ARTIST</th>
                    <th class='track-album default-hide'>ALBUM</th>
                    <th class='track-duration-ms default-show'>DURATION</th>
                    <th class='track-tempo default-show'>BPM</th>
                    <th class='track-danceability default-hide'>DANCEABILITY</th>
                    <th class='track-energy default-hide'>ENERGY</th>
                    <th class='track-valence default-hide'>CHEERFULNESS</th>
                    <th class='track-is-explicit default-hide'>EXPLICIT?</th>
                    <th class='track-category default-hide'>CATEGORIES</th>
                </tr>
                </thead>
                <tbody id="tracksTable"}}>
                    {% for track in recommended_tracks %}
                        <tr class='track' data-track-id={{ track.track_id }}>
                            <td class='track-title default-show' data-track-title={{ track.title }}>{{ track.title }}</td>
                            <td class='track-artist default-show' data-track-artist={{ track.artist }}>{{ track.artist }}</td>
                            <td class='track-album default-hide' data-track-album={{ track.album }}>{{ track.album }}</td>
                            <td class='track-duration-ms default-show' data-track-duration-ms={{ track.duration_ms }}>{{ track.to_mins_secs(track.duration_ms) }}</td>
                            <td class='track-tempo default-show' data-track-tempo={{ track.tempo }}>{{ track.tempo }}</td>
                            <td class='track-danceability default-hide' data-track-danceability={{ track.danceability }}>{{ track.to_percentage(track.danceability) }}</td>
                            <td class='track-energy default-hide' data-track-energy={{ track.energy }}>{{ track.to_percentage(track.energy) }}</td>
                            <td class='track-valence default-hide' data-track-valence={{ track.valence }}>{{ track.to_percentage(track.valence) }}</td>
                            <td class='track-is-explicit default-hide' data-track-is-explicit={{ track.is_explicit }}>{{ track.view_is_explicit() }}</td>
                            <td class="track-category default-hide"></td>
                        </tr>
                    {% endfor %}
                </tbody>  
            </table>
        </div>
    {% else %}
        No recommendations available for this category
    {% endif %}
    </div>

    <!-- Modal show/hide columns -->
    <div class='modal' id='showHideColumnsModal' role='dialog'>
        <div class='modal-dialog'>
            <div class='modal-content'>
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h1>Select columns to view</h1>
                </div>
                <div class='modal-body'>
                    <input class='column-checkbox default-checked' type='checkbox' name='column-name' value='track-title' checked>Title<br>
                    <input class='column-checkbox default-checked' type='checkbox' name='column-name' value='track-artist' checked>Artist<br>
                    <input class='column-checkbox default-unchecked' type='checkbox' name='column-name' value='track-album'>Album<br>
                    <input class='column-checkbox default-checked' type='checkbox' name='column-name' value='track-duration-ms' checked>Duration<br>
                    <input class='column-checkbox default-checked' type='checkbox' name='column-name' value='track-tempo' checked>BPM<br>
                    <input class='column-checkbox default-unchecked' type='checkbox' name='column-name' value='track-danceability'>Danceability<br>
                    <input class='column-checkbox default-unchecked' type='checkbox' name='column-name' value='track-energy'>Energy<br>
                    <input class='column-checkbox default-unchecked' type='checkbox' name='column-name' value='track-valence'>Cheerfulness<br>
                    <input class='column-checkbox default-unchecked' type='checkbox' name='column-name' value='track-is-explicit'>Explicit?
                </div>
                <div class='modal-footer'>
                    <button type="button" class="btn btn-default" id='reset-columns'>Reset</button>
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>    
    <script type="text/javascript" src="/static/js/show-hide-columns.js"></script>
{% endblock %}